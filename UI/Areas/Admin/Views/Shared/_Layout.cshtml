@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
@*admin*@



<!doctype html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ela Admin - HTML5 Admin Template</title>
    <meta name="description" content="Ela Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="image/x-icon" href="~/img/2022-07-01_5_26_11_PM-removebg-preview.png" rel="icon" />


    @*<link rel="apple-touch-icon" href="https://i.imgur.com/QRAUqs9.png">
    <link rel="shortcut icon" href="https://i.imgur.com/QRAUqs9.png">*@      @*بعد ما نعمل اللوجو هنستخدمها*@

    @*<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css">*@                 @*مش عارفه مستخدمه في ايه*@
    @*<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css">*@   @*مش عارفه مستخدمه في ايه*@
    @*<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css">*@    @*تقريبا مش مهمه كانت مستخدمه في ايقونه الميلز بس*@
    @*<link href="https://cdn.jsdelivr.net/npm/jqvmap@1.5.1/dist/jqvmap.min.css" rel="stylesheet">*@                      @*مش عارفه مستخدمه في ايه كانت بعد التشارتيست*@
    @*<link href="https://cdn.jsdelivr.net/npm/weathericons@2.1.0/css/weather-icons.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@3.9.0/dist/fullcalendar.min.css" rel="stylesheet" />*@  @*مش مهمين عشان هشيل الكالندر و الويزر*@


    @*<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">*@  @* (1) *@
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/bootstrap.min.css" rel="stylesheet" />     @* (1) *@

    @*<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">*@                         @* (2) *@
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />   @* (2) *@

    @*<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />*@                @* (3) *@
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/fontawesome-free-6.1.1-web/css/all.css" rel="stylesheet" />  @* (3) *@

    @*<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">*@                          @* (4) *@
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/Icon-font-7-stroke-PIXEDEN-v-1.2.0/pe-icon-7-stroke/css/pe-icon-7-stroke.css" rel="stylesheet" />  @* (4) *@

    @*<link href="https://cdn.jsdelivr.net/npm/chartist@0.11.0/dist/chartist.min.css" rel="stylesheet">*@                            @* (5) *@
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/chartist.min.css_0.11.4/chartist.min.css" rel="stylesheet" />   @* (5) *@

    @*<link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" rel="stylesheet">*@  @* (6) *@
    <link href="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/toastr.min.css" rel="stylesheet" />           @* (6) *@

    <link rel="stylesheet" href="~/ElaAdmin-master/ElaAdmin-master/assets/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="~/ElaAdmin-master/ElaAdmin-master/assets/css/style.css">
    <link rel="stylesheet" href="~/ElaAdmin-master/ElaAdmin-master/assets/css/lib/datatable/dataTables.bootstrap.min.css">

    <style>
        .vertical {
            text-align: center;
            vertical-align: middle !important;
        }

        .fontawesomevertical {
            text-align: center;
            vertical-align: middle !important;
            font-family: monospace;
        }

        .dataTables_paginate .pagination li.active a, .dataTables_paginate .pagination li a:hover {
            background: #337ab7 !important;
            border-color: #ffffff !important;
            color: #fff !important;
        }

        .circleTop {
            position: absolute;
            left: 22px;
            bottom: 29px;
            width: 16px;
            height: 16px;
            line-height: 15px;
            text-align: center;
            border-radius: 50%;
            font-size: 10px;
            color: #FFF;
            background-color: #007bff;
        }

        .text-blockk {
            min-width: 52px;
            height: 49px;
            max-width: 49px;
            color: black;
            border-radius: 100%;
            text-align: center;
            font-size: 20px;
            background-color: #fcaf99;
            line-height: 47px;
        }
    </style>
</head>

<body>
    <!-- Left Panel -->
    <aside id="left-panel" class="left-panel">
        <nav class="navbar navbar-expand-sm navbar-default">
            <div id="main-menu" class="main-menu collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li class="active">
                        <a href="/Admin/Admin/Index"><i class="menu-icon fa fa-laptop"></i>Dashboard </a>
                    </li>
                    <li class="menu-title">Products</li><!-- /.menu-title -->
                    <li class="menu-item-has-children dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <i class="menu-icon fa fa-table"></i>Tables</a>
                        <ul class="sub-menu children dropdown-menu">
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/Brand">Brand</a></li>
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/Case">Case</a></li>
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/GraphicsCard">Graphics Card</a></li>
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/Hdd">HDD</a></li>
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/MotherBoard">MotherBoard</a></li>
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/PowerSupply">Power Supply</a></li>
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/Processor">Processor</a></li>
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/Ram">Ram</a></li>
                            <li><i class="fa fa-table"></i><a href="/Admin/Admin/Ssd">SSD</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="/Admin/Admin/Sales"> <i class="menu-icon fa fa-th"></i>Sales</a>
                    </li>

                    <li class="menu-title">Users</li><!-- /.menu-title -->

                    <li>
                        <a href="/Admin/Admin/Users"> <i class="menu-icon fa fa-user"></i>Users </a>
                    </li>
                    <li>
                        <a href="/Admin/Admin/AdminChat"> <i class="menu-icon fa fa-envelope-open-text"></i>Mails </a>
                    </li>

                    <li class="menu-title">Admins</li><!-- /.menu-title -->

                    <li>
                        <a href="/Admin/Admin/Admins"> <i class="menu-icon fa fa-group"></i>Admins </a>
                    </li>

                    <li>
                        <a href="/Admin/Admin/LogOut"> <i class="menu-icon fa fa-power-off"></i>Logout </a>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </nav>
    </aside>
    <!-- /#left-panel -->
    <!-- Right Panel -->
    <div id="right-panel" class="right-panel">
        <!-- Header-->
        <header id="header" class="header">
            <div class="top-left">
                <div class="navbar-header">
                    <a class="navbar-brand" href="./" style="height: 0px;"><img src="~/img/photo_2022-07-01_17-11-24-removebg-preview.png" alt="Logo"></a>
                    @*<a class="navbar-brand hidden" href="./"><img src="~/ElaAdmin-master/ElaAdmin-master/images/logo2.png" alt="Logo"></a>*@
                    <a id="menuToggle" class="menutoggle"><i class="fa fa-bars"></i></a>
                </div>
            </div>
            <div class="top-right">
                <div class="header-menu">
                    <div class="header-left">

                        <div class="dropdown for-message">
                            <button onclick="location.href='/Admin/Admin/AdminChat'" class="btn btn-secondary dropdown-toggle" type="button" id="message" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <i class="fa fa-envelope"></i>
                                <span id="messagescounter" hidden="hidden" class="circleTop">0</span>
                            </button>
                        </div>
                    </div>

                    <div class="user-area dropdown float-right">
                        <a href="#" class="dropdown-toggle active" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <div class="text-blockk" id="imgDiv"></div>
                        </a>

                        <div class="user-menu dropdown-menu">
                            <a class="nav-link" id="adminName"><i class="fa fa-user"></i></a>

                            <a class="nav-link" href="/Admin/Admin/LogOut"><i class="fa fa-power-off"></i>Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <!-- /#header -->
        @RenderBody()
        <!-- Footer -->
        <!-- /.site-footer -->
    </div>
    <!-- /#right-panel -->
    <!-- Scripts -->

    <script src="~/js/signalr/dist/browser/signalr.js"></script>
    <script src="~/js/jquery.min.js"></script>
    <!-- drop down & menu -->
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/popper.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/bootstrap4.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/main.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/jquery.matchHeight.min.js"></script>
    <!-- /drop down & menu -->
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/datatables.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/dataTables.bootstrap.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/dataTables.buttons.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/buttons.bootstrap.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/jszip.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/vfs_fonts.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/buttons.html5.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/buttons.print.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/lib/data-table/buttons.colVis.min.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/js/init/datatables-init.js"></script>
    <script src="~/ElaAdmin-master/ElaAdmin-master/assets/css/Created/toastr.min.js"></script>
    <script src="~/js/Wonder.js"></script>
    @*<script type="text/javascript" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>*@ @*from (Admins,Users,ProductReviews,Case,GraphicsCard,Hdd,MotherBoard,Processor,PowerSupply,Ram,SSD,CreateCase,CreateHdd,CreateMotherBoard,CreatePowerSupply,CreateProcessor,CreateRam,CreateSsd,CreateVga,) views*@


    <script type="text/javascript">
        "use strict";
        var connection = new signalR.HubConnectionBuilder().withUrl("/chatHub").build();
        $(document).ready(function() {
            $.ajax({
                type: "GET",
                url: "/Admin/Admin/GetAdminInfo",
                dataType: "json",
                success: function(result) {
                    $('#adminName').append(result);
                    var splitedName = SplitName(result);
                    $('#imgDiv').text(splitedName);
                }
            });
            GetMessagesCounter("");
        });
        connection.start().then(function() {
        }).catch(function(arr) {
            return console.error(arr.toString());
        });

        connection.on("ReceiveMessage", function(message, txt, senderid, userid, dictionaryDandT) {
            if (txt == "My text as user") {
                GetMessagesCounter("from receive");
            }

        });

        function SplitName(username) {
            const fullName = username.split(' ');
            const initials = fullName.shift().charAt(0) + fullName.pop().charAt(0);
            return initials.toUpperCase();
        }
        function GetMessagesCounter(txt) {
            $.ajax({
                type: "GET",
                url: "/Admin/Admin/GetMessagesCounter",
                dataType: "json",
                success: function(result) {
                    //اول ما الصفحه تلود في اي وقت--> من غير ما يتبعت رساله
                    $('#messagescounter').html(result).removeAttr('hidden');
                    if (result == 0) {
                        $('#messagescounter').attr('hidden', 'hidden');
                    }
                    if (txt == "from receive") {
                        //اكون جايه من الاستدعاء في الريسيف --> يعني الرساله لسه مبعوته
                        toastr.info('you have new message', '', { timeOut: 7000, positionClass: "toast-bottom-right", progressBar: true });
                    }
                }
            });

        }
                                                                                                                                             //toastr.options = {
                                                                                                                                                //"closeButton": false,
                                                                                                                                                //"debug": false,
                                                                                                                                                //"newestOnTop": false,
                                                                                                                                                //"progressBar": true,
                                                                                                                                                //"positionClass": "toast-top-right",
                                                                                                                                                //"preventDuplicates": false,
                                                                                                                                                //"onclick": null,
                                                                                                                                                //"showDuration": "3000",
                                                                                                                                                //"hideDuration": "1000",
                                                                                                                                                //"timeOut": "5000",
                                                                                                                                                //"extendedTimeOut": "300",
                                                                                                                                                //"showEasing": "swing",
                                                                                                                                                //"hideEasing": "linear",
                                                                                                                                                //"showMethod": "fadeIn",
                                                                                                                                                //"hideMethod": "fadeOut",
                                                                                                                                                //iconClasses: {
                                                                                                                                                //    error: 'fas fa-trash',
                                                                                                                                                //    info: 'fa fa-info',
                                                                                                                                                //    success: 'fas fa-check',
                                                                                                                                                //    warning: 'something',
                                                                                                                                                //},
                                                                                                                                                //};
    </script>
    <!--Local Stuff-->

</body>
